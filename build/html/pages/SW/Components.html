

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2.3. Level 3: Component &mdash; H29 1.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="2.4. Level 4: Code" href="Code.html" />
    <link rel="prev" title="2.2. Level 2: Containers" href="Containers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> H29
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">H29</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Environments.html">1. Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Software architecture.html">2. Software architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="SystemContext.html">2.1. Level 1: System Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="Containers.html">2.2. Level 2: Containers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2.3. Level 3: Component</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#webapp">2.3.1. Webapp</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-apis">2.3.2. External APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#azure-cognitive-services">2.3.3. Azure cognitive services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#computer-vision">2.3.3.1. Computer Vision</a></li>
<li class="toctree-l3"><a class="reference internal" href="#qna-maker">2.3.3.2. Qna maker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#translator">2.3.3.3. Translator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#azure-healthbot">2.3.4. Azure healthbot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#azure-blobs">2.3.5. Azure blobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#other-services">2.3.6. Other services</a></li>
<li class="toctree-l2"><a class="reference internal" href="#databases">2.3.7. Databases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Code.html">2.4. Level 4: Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Superadmin profile.html">3. Superadmin profile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Technical debt.html">4. Technical debt</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">H29</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
      <li>2.3. Level 3: Component</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/pages/SW/Components.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <img align="right" width="100px" src="../../_images/Foundation29.png"><div class="section" id="level-3-component">
<h1>2.3. Level 3: Component<a class="headerlink" href="#level-3-component" title="Permalink to this headline">¶</a></h1>
<p>Taking into account the division by containers exposed in the previous point, we are now going to study in detail the internal architecture and the components that make up each one of them.</p>
<div class="section" id="webapp">
<h2>2.3.1. Webapp<a class="headerlink" href="#webapp" title="Permalink to this headline">¶</a></h2>
<p>Health29’s architecture uses a client-server software design model, so that the architecture of the webapp is like:</p>
<img width="800px" src="../../_images/Webapp.jpg"><p>For the client we use the Angular 5 framework, and for the nodejs - express server, in which we have implemented an API to connect to the CosmoDb databases using mongoose for its management.</p>
<img width="800px" src="../../_images/Webapp_frameworks_architecture.jpg"><p>These modules are intercommunicated using a <a class="reference external" href="https://restfulapi.net/">REST</a> interface, that is, the communication is established according to the <a class="reference external" href="https://restfulapi.net/http-methods/">HTTP protocol</a>.</p>
<p>This communication between client and server is mainly used for data management, i.e. to obtain, add or modify information from databases.
For this purpose, an HTTP service will be used to allow, through requests from the client to the server, to carry out these operations. The server will listen to these requests and will perform the appropriate operations to give an answer to the client.</p>
<p>The Health29 platform has been developed as a Platform as a Service (PaaS) in Azure. That is, an App Service has been created that contains the client-server webapp. In particular, the App Service created is <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.Web/sites/health29/appServices">health29</a></p>
</div>
<div class="section" id="external-apis">
<h2>2.3.2. External APIs<a class="headerlink" href="#external-apis" title="Permalink to this headline">¶</a></h2>
<p><strong><a class="reference external" href="https://f29api.northeurope.cloudapp.azure.com/index.html">Foundation29 API</a></strong>, implemented by Foundation29 to use it as an intermediary between the webapp and the azure qnamaker service. It is used for QNA functions for the different roles of Health29 platform.</p>
<p style="text-align: center;">
	<img width="400px" src="../../_images/F29API_component.jpg">
</p><p><strong>The <a class="reference external" href="https://api.monarchinitiative.org/">Monarch</a> API</strong>, is an external API that is used for the diagnostic functions for the different roles of the Health29 platform.</p>
<p style="text-align: center;">
	<img width="300px" src="../../_images/monarchAPI_component.jpg">
</p></div>
<div class="section" id="azure-cognitive-services">
<h2>2.3.3. Azure cognitive services<a class="headerlink" href="#azure-cognitive-services" title="Permalink to this headline">¶</a></h2>
<p>As explained in the previous section of this document (2.2.Containers) several “Azure cognitive services” will be used.</p>
<p>In particular, services will be used for the conversion of formats, for the translation of texts and for the creation of databases for the FAQs of each group of patients.</p>
<p style="text-align: center;">
	<img width="400px" src="../../_images/cognitiveServices_component.jpg">
</p><p>All of them will communicate with webapp.</p>
<p>In the following subsections each of them is introduced.</p>
<div class="section" id="computer-vision">
<h3>2.3.3.1. Computer Vision<a class="headerlink" href="#computer-vision" title="Permalink to this headline">¶</a></h3>
<p>It is used in the symptoms section. This service converts images into text in order to obtain the symptoms.</p>
<p>You can configure and use this azure service by following the steps in the <a class="reference external" href="https://docs.microsoft.com/bs-latn-ba/azure/cognitive-services/computer-vision/">Microsoft guide</a>.
And access the one that uses the Health29 platform from this <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.CognitiveServices/accounts/recognizetexthealth29/overview">link</a>.</p>
</div>
<div class="section" id="qna-maker">
<h3>2.3.3.2. Qna maker<a class="headerlink" href="#qna-maker" title="Permalink to this headline">¶</a></h3>
<p>QnA Maker is a cloud-based Natural Language Processing (NLP) service that easily creates a natural conversation layer with the data.</p>
<p>In Health29 it is used to manage the FAQs in different ways and from different points of the platform:</p>
<ul class="simple">
<li><p>To show the list of FAQs to the <strong>users</strong>. From the user profile you can access the FAQ page where you will be shown the results of the service consultation in the form of a list.</p></li>
<li><p>So that the <strong>administrators</strong> of the platform can manage the list of FAQs. From the administrator profile you can add, delete and edit the list of FAQs of the service.</p></li>
<li><p>It is integrated into the <strong>healthbot</strong> to allow users to ask questions or doubts in a more guided and personal way.</p></li>
</ul>
<p>In this case the communication of the webapp with this service is requested from the client through an external API that acts as an intermediary. However, there will also be information that will be stored in the databases, therefore, the client will also establish a communication with the server who will manage the storage of this information.</p>
<p>You can configure and use this azure service by following the steps in the <a class="reference external" href="https://docs.microsoft.com/en-us/azure/cognitive-services/qnamaker/">Microsoft guide</a>.
And access the one that uses the Health29 platform from this <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.CognitiveServices/accounts/qnamakerhealth29/overview">link</a></p>
<p>In particular for Health29 the following databases have been created in qnamaker: <a class="reference external" href="https://www.qnamaker.ai/Home/MyServices">My knowledge bases</a>. One would be created for each group of patients to contain their specific information and this in turn would be replicated in as many languages as the question-answer pairs are translated on the Health29 platform.</p>
</div>
<div class="section" id="translator">
<h3>2.3.3.3. Translator<a class="headerlink" href="#translator" title="Permalink to this headline">¶</a></h3>
<p>This service is used to be able to make a translation of the different datapoints, to add a new language to the platform (it translates all the tags), and to translate into English the text obtained from the vision service to call the NCR service that extracts the symptoms.</p>
<p>You can configure and use this azure service by following the steps in the <a class="reference external" href="https://docs.microsoft.com/bs-cyrl-ba/azure/cognitive-services/translator/">Microsoft guide</a>.</p>
<p>And access the two that uses the Health29 platform from these links:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.CognitiveServices/accounts/health29translateplatform/overview">health29translateplatform</a></p></li>
<li><p><a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/phenotypeBot/providers/Microsoft.CognitiveServices/accounts/translatorBotApi/overview">translatorBotApi</a></p></li>
</ul>
</div>
</div>
<div class="section" id="azure-healthbot">
<h2>2.3.4. Azure healthbot<a class="headerlink" href="#azure-healthbot" title="Permalink to this headline">¶</a></h2>
<p>Health29 has an assistant to guide the user in the use of the platform.</p>
<p style="text-align: center;">
	<img width="300px" src="../../_images/healthbot_component.jpg">
</p><p>For this purpose, the Azure <a class="reference external" href="https://docs.microsoft.com/en-us/healthbot/">Healthbot</a> service is used.</p>
<p>It guides the user through different configured scenarios where he or she can perform different actions. Initially we can divide the scenarios into three blocks:</p>
<ul class="simple">
<li><p><strong>New user</strong> scenario or first time in the platform. The chatbot will provide the user with help and guidance in this process and provide he or she with more information if required.</p></li>
<li><p>Scenario of <strong>pending notifications</strong>. In case the user has any pending notifications, he or she will be informed during the first run of the assistant.</p></li>
<li><p><strong>Main</strong> scenario. A series of guided scenarios will appear where the user will be able to make different types of queries.</p></li>
</ul>
<p>You can configure and use this azure service by following the steps in the <a class="reference external" href="https://docs.microsoft.com/en-us/healthbot/quickstart-createyourhealthcarebot">Microsoft guide</a>.
And access the one that uses the Health29 platform from this <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/testresourcesjavi/providers/Microsoft.Web/sites/HealthBotContainerSamplef666/appServices">link</a>.</p>
<p>In particular for Health29 the following chatbots have been created (All of them use the previous App Service):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://us.healthbot.microsoft.com/account/zebrahealthbot/scenarios/manage">Healthbot</a> of the development environment.</p></li>
<li><p><a class="reference external" href="https://eu.healthbot.microsoft.com/account/healthbot-test-tjo3h51/scenarios/manage">Healthbot</a> of the test environment.</p></li>
<li><p><a class="reference external" href="https://eu.healthbot.microsoft.com/account/h29bot-giochop/scenarios/manage">Healthbot</a> of the production environment.</p></li>
</ul>
</div>
<div class="section" id="azure-blobs">
<h2>2.3.5. Azure blobs<a class="headerlink" href="#azure-blobs" title="Permalink to this headline">¶</a></h2>
<p>Azure Blob storage is Microsoft’s object storage solution for the cloud. Blob storage is optimized for storing massive amounts of unstructured data. Unstructured data is data that doesn’t adhere to a particular data model or definition, such as text or binary data.</p>
<p>Two “Storage accounts (classic)” container called “blobgenomics” adn “health29support” has been created to store information from various sections of Health29.
For the first one:</p>
<ul class="simple">
<li><p>Medical care section. Here, one container per patient is created to store their medical information.</p></li>
<li><p>Diagnosis section. As in the previous point, one container per patient is created to store the diagnostic information.</p></li>
<li><p>User profile section. Used to export patient data in PDF or JSON format. A container per patient is also created.</p></li>
<li><p>Genotype section. One container per patient is created to store the genotype data of the patient.</p></li>
<li><p>Phenotype section. Same as above but for saving the phenotype data.</p></li>
</ul>
<p>The second has been created to manage the data of support section. Unlike the previous ones, only a container named “filessupport” is created for this data to store the data related to the Health29 platform support.</p>
<p>You can configure and use this azure service by following the steps in the <a class="reference external" href="https://docs.microsoft.com/es-es/azure/storage/blobs/storage-blobs-introduction">Microsoft guide</a>.
And access the two that uses the Health29 platform from these links:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.Storage/storageAccounts/blobgenomics/containersList">blobgenomics</a>.</p></li>
<li><p><a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.Storage/storageAccounts/health29support/overview">health29support</a></p></li>
</ul>
<p style="text-align: center;">
	<img width="400px" src="../../_images/blobs_component.jpg">
</p></div>
<div class="section" id="other-services">
<h2>2.3.6. Other services<a class="headerlink" href="#other-services" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <a class="reference external" href="https://portal.azure.com/#blade/WebsitesExtension/FunctionsIFrameBlade/id/%2Fsubscriptions%2F53348303-e009-4241-9ac7-a8e4465ece27%2FresourceGroups%2Fhealth29%2Fproviders%2FMicrosoft.Web%2Fsites%2FGenomicServices">Genomics Functions apps</a> for phenolyze and exomize tasks. It is an Azure service.</p></li>
<li><p>The <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/phenotypeBot/providers/Microsoft.Web/sites/DiagnosisApi/appServices">DiagnosisApi</a> is an App Service of Azure that is used for consulting the symptons of a diagnose. It is an Azure service.</p></li>
</ul>
</div>
<div class="section" id="databases">
<h2>2.3.7. Databases<a class="headerlink" href="#databases" title="Permalink to this headline">¶</a></h2>
<p>We have several separate collections in two databases, one for accounts and general things, and one for patient data.</p>
<p>The development and test environments share the same databases, while the production ones do not. So, in total we have 4 databases:</p>
<ul class="simple">
<li><p>Two for accounts</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>Development and testing: <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.DocumentDb/databaseAccounts/health29-accounts-test/overview">health29-accounts-test</a></p></li>
<li><p>Production: <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.DocumentDb/databaseAccounts/health29-accounts-final/overview">health29-accounts-final</a></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Two for patient data</p></li>
</ul>
<blockquote>
<div><ul class="simple">
<li><p>Development and testing: <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.DocumentDb/databaseAccounts/health29-data-test/overview">health29-data-test</a></p></li>
<li><p>Production: <a class="reference external" href="https://portal.azure.com/#&#64;foundation29outlook.onmicrosoft.com/resource/subscriptions/53348303-e009-4241-9ac7-a8e4465ece27/resourceGroups/health29/providers/Microsoft.DocumentDb/databaseAccounts/health29-data-final/overview">health29-data-final</a></p></li>
</ul>
</div></blockquote>
<p style="text-align: center;">
	<img width="600px" src="../../_images/ddbb_component.jpg">
</p><p>Access from the Health29 platform is done from the application server,using <a class="reference external" href="https://mongoosejs.com/docs/">mongoose</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Code.html" class="btn btn-neutral float-right" title="2.4. Level 4: Code" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Containers.html" class="btn btn-neutral float-left" title="2.2. Level 2: Containers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Foundation29

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>